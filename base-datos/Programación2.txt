CREATE OR REPLACE TRIGGER DISPARADOR_AGENCIA BEFORE INSERT ON Agencia FOR EACH ROW
DECLARE
CURSOR CURSOR1 IS SELECT * FROM Agencia;
BEGIN
FOR I IN CURSOR1  LOOP
IF :NEW.NOMBRE= I.NOMBRE THEN
RAISE_APPLICATION_ERROR(-20001,'LO SIENTO NO TENEMOS AUTOS DISPONIBLES EN ESTA AGENCIA');
END IF;
END LOOP;
END;
/

CREATE OR REPLACE TRIGGER DISPARADOR_CLIENTE BEFORE INSERT ON Cliente FOR EACH ROW
DECLARE
CURSOR CURSOR2 IS SELECT * FROM Cliente;
BEGIN
FOR I IN CURSOR2  LOOP
IF :NEW.NOMBRE= I.NOMBRE THEN
RAISE_APPLICATION_ERROR(-20001,'LO SIENTO ESTE CLIENTE NO HA RESERVADO NINGUN AUTO');
END IF;
END LOOP;
END;
/

CREATE OR REPLACE TRIGGER DISPARADOR_RESERVACION BEFORE INSERT ON Reservacion FOR EACH ROW
DECLARE
CURSOR CURSOR3 IS SELECT * FROM Reservacion;
BEGIN
FOR I IN CURSOR3  LOOP
IF :NEW.FECHA= I.FECHA THEN
RAISE_APPLICATION_ERROR(-20001,'LO SIENTO SU FECHA DE ENTREGA YA CADUCO');
END IF;
END LOOP;
END;
/

CREATE OR REPLACE TRIGGER DISPARADOR_AUTO BEFORE INSERT ON Auto FOR EACH ROW
DECLARE
CURSOR CURSOR4 IS SELECT * FROM Auto;
BEGIN
FOR I IN CURSOR4  LOOP
IF :NEW.TIPO= I.TIPO THEN
RAISE_APPLICATION_ERROR(-20001,'LO SIENTO ESE TIPO DE AUTO ACTUALMENTE NO ESTA DISPONIBLE');
END IF;
END LOOP;
END;
/


DECLARE 
NOMBRE VARCHAR2(80);
DIRECCION VARCHAR2(80);
IDD INTEGER;
BEGIN
Insertar_agencia(IDD,'RENTA DE AUTOS','PIE DE LA CUESTA 329');
END;
/

DECLARE 
FECHA_INICIO DATE;
FECHA_FIN DATE;
IDD INTEGER;
BEGIN
Insertar_reservacion(IDD,'7/04/14','12/04/14');
END;
/

DECLARE 
NOMBRE VARCHAR2(80);
APELLIDOS VARCHAR2(80);
TELEFONO INTEGER;
DIRECCION VARCHAR2(80);
IDD INTEGER;
BEGIN
Insertar_cliente(IDD,'EDUARDO','MORALES','5549587278','PIE DE LA CUESTA COLONIA LA VIGA');
END;
/

DECLARE 
PLACAS VARCHAR2(80);
TIPO VARCHAR2(80);
IDD INTEGER;
BEGIN
Insertar_auto(IDD,'ZMU3975','SEDAN');
END;
/
